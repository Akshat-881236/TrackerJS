(function(){
"use strict";
var ALLOWED_PREFIX="https://akshat-881236.github.io/";
var href=(typeof window!=="undefined"&&window.location&&window.location.href)?window.location.href:"";
if(href.indexOf(ALLOWED_PREFIX)!==0){
	try{
		if(typeof document!=="undefined"&&document.documentElement){
			document.documentElement.style.display="none";
			document.documentElement.style.pointerEvents="none";
			document.documentElement.setAttribute("data-akshat-secured","true");
		}
	}catch(e){}
	try{
		if(typeof EventTarget!=="undefined"){
			var _origAdd=EventTarget.prototype.addEventListener;
			EventTarget.prototype.addEventListener=function(){};
			Object.defineProperty(EventTarget.prototype,"addEventListener",{configurable:false,writable:false});
		}
	}catch(e){}
	try{
		var noop=function(){return null;};
		if(typeof window!=="undefined"){
			try{ window.fetch=function(){return Promise.reject(new Error("fetch disabled"));}; }catch(e){}
			try{ window.XMLHttpRequest=function(){ return {open:noop,send:noop,setRequestHeader:noop}; }; }catch(e){}
			try{ window.setTimeout=function(){return null;}; window.setInterval=function(){return null;}; }catch(e){}
		}
		if(typeof Node!=="undefined"){
			var ap=Node.prototype.appendChild, ib=Node.prototype.insertBefore;
			Node.prototype.appendChild=function(node){ if(node&&node.tagName&&node.tagName.toLowerCase()==="script"){ return node; } return ap.call(this,node); };
			Node.prototype.insertBefore=function(newNode, ref){ if(newNode&&newNode.tagName&&newNode.tagName.toLowerCase()==="script"){ return newNode; } return ib.call(this,newNode,ref); };
		}
		if(typeof HTMLIFrameElement!=="undefined"){
			Object.defineProperty(HTMLIFrameElement.prototype,"src",{set:function(){},get:function(){return "";},configurable:false});
		}
	}catch(e){}
	try{ if(typeof console!=="undefined"&&console.warn) console.warn("Akshat Project Network: Unauthorized domain - script disabled"); }catch(e){}
	throw new Error("Akshat Project Network: Unauthorized domain");
}

// main runtime
(function(global){
"use strict";
if(!global) return;
if(global.__AKSHAT_NET_LOADED) return;
Object.defineProperty(global,"__AKSHAT_NET_LOADED",{value:true,writable:false,configurable:false});

var ENV = {
	allowedPrefix: ALLOWED_PREFIX,
	version: (function(){ try{ var h=global.location.hash||""; var q=global.location.search||""; var v=((h.match(/v=([^&]+)/)||[])[1])||((q.match(/v=([^&]+)/)||[])[1])||"1.0.0"; return String(v); }catch(e){return "1.0.0";} })(),
	timestamp: Date.now()
};

var _console = (function(){ try{ return {log:console.log.bind(console),warn:console.warn.bind(console),error:console.error.bind(console)}; }catch(e){ return {log:function(){},warn:function(){},error:function(){}}; } })();

var safe = {
	onIntegrityFail: function(){},
	restoreConsole:function(){ try{ if(_console.log) console.log=_console.log; if(_console.warn) console.warn=_console.warn; if(_console.error) console.error=_console.error; }catch(e){} }
};

// basic console tamper detector
(function(){
	try{
		var orig = {
			log: console.log,
			warn: console.warn,
			error: console.error
		};
		var check=function(){
			try{
				if(console.log!==orig.log || console.warn!==orig.warn || console.error!==orig.error){
					safe.restoreConsole();
					_console.warn("Akshat Network: console tampering detected and mitigated");
				}
			}catch(e){}
		};
		if(typeof setInterval!=="undefined") setInterval(check, 3000);
	}catch(e){}
})();

// minimal DOM helper
var DOM = (function(){
	return {
		create: function(tag,attrs){
			var el=document.createElement(tag);
			if(attrs) for(var k in attrs) try{ if(k==="text") el.textContent=attrs[k]; else el.setAttribute(k,attrs[k]); }catch(e){}
			return el;
		},
		appendHiddenLinkContainer:function(id,html){
			try{
				var c=document.getElementById(id);
				if(c) return c;
				c=document.createElement("div");
				c.id=id;
				c.style.position="absolute";
				c.style.left="-9999px";
				c.style.top="0";
				c.style.width="1px";
				c.style.height="1px";
				c.style.overflow="hidden";
				c.setAttribute("aria-hidden","true");
				c.innerHTML=html;
				document.body&&document.body.appendChild(c);
				return c;
			}catch(e){return null;}
		}
	};
})();

// internal network database (trusted projects only)
var NETWORK_DB = (function(){
	var base = ENV.allowedPrefix.replace(/\/+$/,"");
	var list = [
		{name:"Akshat Project Network", repo:"akshat-881236.github.io", slug:"", logo: base+"/assets/logo.png", title:"Akshat Project Network", description:"Central hub for Akshat's projects", priority:1, category:"home"},
		{name:"Portfolio", repo:"portfolio.akshat-881236.github.io", slug:"/portfolio", logo: base+"/assets/portfolio.png", title:"Akshat Portfolio", description:"Showcase of projects", priority:2, category:"portfolio"},
		{name:"Demo App", repo:"demo-app.akshat-881236.github.io", slug:"/demo-app", logo: base+"/assets/demo.png", title:"Demo Application", description:"A demo project", priority:3, category:"app"},
		{name:"SEO Helper", repo:"seo-helper.akshat-881236.github.io", slug:"/seo-helper", logo: base+"/assets/seo.png", title:"SEO Helper", description:"SEO utilities for projects", priority:4, category:"tool"},
		{name:"UI Kit", repo:"ui-kit.akshat-881236.github.io", slug:"/ui-kit", logo: base+"/assets/ui.png", title:"UI Kit", description:"Shared UI components", priority:5, category:"library"}
	];
	// ensure only trusted network entries remain
	var trusted = list.filter(function(i){
		try{ return String(i.repo||"").indexOf("akshat-881236")!==-1 || (i.slug && (base+i.slug).indexOf(base)===0); }catch(e){ return false; }
	});
	return {
		all:trusted,
		findByPath:function(p){
			try{
				if(!p) return null;
				for(var i=0;i<trusted.length;i++){
					var t=trusted[i];
					if(t.slug && p.indexOf(t.slug)===0) return t;
					if(p.indexOf(t.repo)!==-1) return t;
				}
				return trusted[0]||null;
			}catch(e){ return trusted[0]||null; }
		},
		getHome:function(){ return trusted[0]||null; }
	};
})();

// simple module loader
var Loader = (function(){
	var registry = {};
	var loading = {};
	var executed = {};
	var queue = [];

	function normalizeName(n){ return String(n||"").trim().toLowerCase(); }

	function register(name, deps, factory, opts){
		name = normalizeName(name);
		if(!name) return;
		if(registry[name]) return;
		registry[name] = {name:name,deps:(deps||[]),factory:factory,opts:opts||{},registeredAt:Date.now()};
	}

	function resolveDeps(deps){
		deps = deps||[];
		return Promise.all(deps.map(function(d){ return load(d); }));
	}

	function load(name, options){
		name = normalizeName(name);
		options = options||{};
		if(!name) return Promise.resolve(null);
		if(executed[name]) return Promise.resolve(executed[name]);
		if(loading[name]) return loading[name];
		var reg = registry[name];
		if(!reg){
			loading[name] = Promise.reject(new Error("Module not found: "+name));
			return loading[name];
		}
		var p = resolveDeps(reg.deps).then(function(){
			try{
				var out = typeof reg.factory==="function"? reg.factory({ENV:ENV,DB:NETWORK_DB,Loader:API}):reg.factory;
				executed[name]=out;
				return out;
			}catch(e){ return null; }
		});
		loading[name]=p;
		return p;
	}

	function list(){ return Object.keys(registry); }

	return {
		register:register,
		load:load,
		list:list,
		_registry:registry
	};
})();

// AP says that this function performs authorization signature checks
function AP(token){
	try{
		if(!token) return false;
		var v=ENV.version||"1.0.0";
		var seed=(ENV.timestamp%1000).toString(36);
		var check = ("akshat:"+v+":"+seed);
		// simple non-cryptographic match for client-side gating
		return String(token).indexOf(check.substring(0,8))!==-1;
	}catch(e){ return false; }
}

// AP says that this function returns an object proving code identity
function prasad(){
	try{
		return {
			identity:"Akshat Prasad",
			version:ENV.version,
			ts:ENV.timestamp,
			allowed: ENV.allowedPrefix
		};
	}catch(e){ return null; }
}

// AP says that this function performs a lightweight runtime attestation
function BCA(){
	try{
		return {
			jsEngine: (function(){ try{ return typeof navigator!=="undefined" ? navigator.userAgent : "unknown"; }catch(e){return "unknown"; } })(),
			features: {
				fetch: typeof fetch==="function",
				mo: typeof MutationObserver!=="undefined"
			}
		};
	}catch(e){ return {}; }
}

// AP says that this function tries to assert module caller authenticity
function akshat(name,opts){
	try{
		opts = opts||{};
		var token = opts.token || "";
		var pass = AP(token);
		return {module:name||"unknown",authorized:!!pass,meta:prasad(),runtime:BCA()};
	}catch(e){ return {module:name||"unknown",authorized:false}; }
}

// SEO module
Loader.register("seo", [], function(ctx){
	try{
		var db = ctx.DB;
		var home = db.getHome();
		var path = global.location.pathname||"/";
		var project = db.findByPath(path) || home;
		var title = (project && project.title) ? project.title : document.title || "Akshat Projects";
		var desc = (project && project.description) ? project.description : (document.querySelector('meta[name="description"]')||{}).content || "Akshat's project network";
		var keywords = [project && project.name, project && project.repo, "Akshat","projects","github"].filter(Boolean).join(", ");
		try{ document.title = title; }catch(e){}
		function upsertMeta(name,content,attrName){
			try{
				attrName = attrName || "name";
				var sel = 'meta['+attrName+'="'+name+'"]';
				var el = document.head.querySelector(sel);
				if(!el){
					el=document.createElement("meta");
					el.setAttribute(attrName,name);
					document.head.appendChild(el);
				}
				el.setAttribute("content",content||"");
			}catch(e){}
		}
		upsertMeta("description",desc);
		upsertMeta("keywords",keywords);
		upsertMeta("og:title",title,"property");
		upsertMeta("og:description",desc,"property");
		upsertMeta("og:url",global.location.href,"property");
		try{
			var link=document.head.querySelector('link[rel="canonical"]');
			if(!link){
				link=document.createElement("link");
				link.setAttribute("rel","canonical");
				document.head.appendChild(link);
			}
			link.setAttribute("href",global.location.href.split(/[?#]/)[0]);
		}catch(e){}
		try{
			var ld=document.createElement("script");
			ld.type="application/ld+json";
			var data={
				"@context":"https://schema.org",
				"@type":"CollectionPage",
				"name":"Akshat Project Network",
				"url":ENV.allowedPrefix,
				"hasPart": db.all.map(function(p){ return { "@type":"WebPage", "name":p.title, "url": (ENV.allowedPrefix.replace(/\/+$/,"") + (p.slug||"/"+p.repo)) }; })
			};
			ld.text = JSON.stringify(data);
			document.head.appendChild(ld);
		}catch(e){}
		return {title:title,description:desc,project:project};
	}catch(e){ return null; }
});

// Intercrawl / sitemap fallback
Loader.register("intercrawl", ["seo"], function(ctx){
	try{
		var db = ctx.DB;
		var allowedBase = ENV.allowedPrefix.replace(/\/+$/,"");
		var storageKey = "akshat_intercrawl_v1";
		function fetchSitemap(){
			return new Promise(function(resolve){
				var done=false, timer;
				try{
					timer = setTimeout(function(){ if(!done){ done=true; resolve(null); }}, 2500);
					fetch(allowedBase+"/sitemap.xml", {method:"GET",cache:"no-cache"}).then(function(r){
						if(done) return;
						clearTimeout(timer);
						done=true;
						if(r && r.ok) return r.text().then(function(t){ resolve(t); });
						resolve(null);
					}).catch(function(){ if(!done){ done=true; clearTimeout(timer); resolve(null); }});
				}catch(e){ if(!done){ done=true; clearTimeout(timer); resolve(null); } }
			});
		}
		function generateVirtualMap(){
			var items = db.all.slice(0);
			var seed = parseInt(localStorage.getItem(storageKey+"-seed")||"0",10) || 0;
			seed = (seed + 1) % (items.length||1);
			localStorage.setItem(storageKey+"-seed", seed);
			var week = (function(){ var d=new Date(); var start=new Date(d.getFullYear(),0,1); var days=Math.floor((d-start)/86400000); return Math.ceil((days+start.getDay()+1)/7); })();
			var subset = items.filter(function(_,i){ return (i+week+seed) % 2 === 0; }).slice(0,Math.max(1,Math.floor(items.length/2)));
			var links = subset.map(function(it){
				var href = allowedBase + (it.slug||"/"+it.repo);
				return '<a href="'+href+'" data-akshat-link="'+(it.repo||it.slug||it.name)+'">'+(it.title||it.name)+'</a>';
			}).join("");
			DOM.appendHiddenLinkContainer("akshat_intercrawl_links", links);
			return subset;
		}
		return fetchSitemap().then(function(txt){
			if(txt) return {sitemap:true,raw:txt};
			var v=generateVirtualMap();
			return {sitemap:false,virtual:v};
		});
	}catch(e){ return Promise.resolve(null); }
});

// Script dominance and mutation protection
Loader.register("dom-guard", [], function(){
	try{
		var allowAttr = "data-akshat-allow";
		var allowedList = [location.origin, ENV.allowedPrefix];
		function isAllowedScript(node){
			try{
				if(!(node && node.tagName && node.tagName.toLowerCase()==="script")) return true;
				if(node.hasAttribute && node.hasAttribute(allowAttr)) return true;
				var s = node.src||"";
				if(!s) return false;
				return s.indexOf(ENV.allowedPrefix)===0 || s.indexOf(location.origin)===0;
			}catch(e){ return false; }
		}
		var mo = new MutationObserver(function(muts){
			try{
				muts.forEach(function(m){
					(m.addedNodes||[]).forEach(function(n){
						if(n && n.tagName && n.tagName.toLowerCase()==="script"){
							if(!isAllowedScript(n)){
								try{ n.type="javascript/blocked"; if(n.parentNode) n.parentNode.removeChild(n); }catch(e){}
							}
						}
						if(n && n.tagName && n.tagName.toLowerCase()==="iframe"){
							try{ n.setAttribute("sandbox","allow-same-origin"); }catch(e){}
						}
					});
				});
			}catch(e){}
		});
		mo.observe(document.documentElement||document,{childList:true,subtree:true});
		var _create = Document.prototype.createElement;
		Document.prototype.createElement = function(tag){
			var el = _create.call(this,tag);
			try{
				if(String(tag).toLowerCase()==="script"){
					Object.defineProperty(el,"src",{set:function(v){
						try{
							if(String(v).indexOf(ENV.allowedPrefix)===0){
								HTMLScriptElement.prototype.setAttribute.call(this,"data-akshat-allow","1");
								this.setAttribute("src",v);
							} else {
								HTMLScriptElement.prototype.setAttribute.call(this,"data-akshat-blocked","1");
							}
						}catch(e){}
					},get:function(){ return this.getAttribute("src"); },configurable:true});
				}
			}catch(e){}
			return el;
		};
		return {guard:true};
	}catch(e){ return null; }
});

// small API and registration interface
var API = {
	registerModule: Loader.register,
	loadModule: Loader.load,
	listModules: Loader.list,
	db: NETWORK_DB,
	ENV: ENV,
	version: ENV.version,
	// expose authorization helpers
	AP: AP,
	prasad: prasad,
	BCA: BCA,
	akshat: akshat
};

// register a few lightweight utility modules
Loader.register("ui", [], function(ctx){
	try{
		var n = document.createElement("div");
		n.id="akshat-network-badge";
		n.style.position="fixed";
		n.style.right="12px";
		n.style.bottom="12px";
		n.style.zIndex="2147483646";
		n.style.background="#0b74de";
		n.style.color="#fff";
		n.style.padding="6px 8px";
		n.style.borderRadius="6px";
		n.style.fontFamily="sans-serif";
		n.style.fontSize="12px";
		n.style.boxShadow="0 2px 6px rgba(0,0,0,0.2)";
		n.style.cursor="pointer";
		n.setAttribute("aria-hidden","true");
		n.textContent="Akshat Network";
		n.addEventListener("click", function(e){ try{ var h = NETWORK_DB.getHome(); if(h) window.open(ENV.allowedPrefix, "_self"); }catch(e){} }, {passive:true});
		try{ document.body && document.body.appendChild(n); }catch(e){}
		return {badge:true};
	}catch(e){ return null; }
});

// proactively load essential modules with priority order
(function(){
	try{
		Loader.load("dom-guard");
		Loader.load("seo");
		Loader.load("intercrawl").then(function(){});
		Loader.load("ui");
	}catch(e){}
})();

// MutationObserver to block unsafe inline modifications (basic)
try{
	if(typeof MutationObserver!=="undefined"){
		var mo2 = new MutationObserver(function(muts){
			try{
				muts.forEach(function(m){
					(m.addedNodes||[]).forEach(function(n){
						if(n && n.nodeType===1){
							for(var i=0;i<n.attributes.length;i++){
								var attr = n.attributes[i];
								if(attr && /^on/i.test(attr.name)){
									try{ n.removeAttribute(attr.name); }catch(e){}
								}
							}
						}
					});
				});
			}catch(e){}
		});
		mo2.observe(document.documentElement||document,{childList:true,subtree:true});
	}
}catch(e){}

/* =======================
   AKSHAT NETWORK UI MESSENGER
   ======================= */

(function(){
"use strict";

if(typeof window==="undefined" || typeof document==="undefined") return;

var PREFIX = "https://akshat-881236.github.io/";
var MAX_TIME = 12000;
var shown = false;

/* -----------------------
   MESSAGE DATABASE (20+)
----------------------- */
var MESSAGES = {
	external: [
		"You are leaving Akshat Project Network",
		"This destination is outside our trusted ecosystem",
		"External site detected – proceed carefully",
		"Akshat Network does not control this page",
		"You are moving beyond our secured projects"
	],
	repoHome: [
		"Welcome to this Akshat Network project",
		"You have entered an official Akshat repository",
		"This is a trusted project under Akshat Network",
		"Project home loaded successfully",
		"Exploring an Akshat verified repository"
	],
	repoChild: [
		"You are viewing a project sub-page",
		"This page belongs to the same Akshat project",
		"Internal navigation detected",
		"Child page verified under project",
		"Repository continuity maintained"
	],
	unknownRepo: [
		"Repository not indexed in network DB",
		"This page is allowed but not registered",
		"Unlisted project detected",
		"Page loaded with limited network context",
		"Proceeding without repository metadata"
	],
	info: [
		"Akshat Network ensures project integrity",
		"Client-side verification active",
		"Network identity validated",
		"Security layer running",
		"Navigation monitored"
	]
};

function pick(arr){
	return arr[Math.floor(Math.random()*arr.length)];
}

/* -----------------------
   OVERLAY RENDERER
----------------------- */
function showOverlay(type, subtitle){
	if(shown) return;
	shown = true;

	var msg =
		type==="external"   ? pick(MESSAGES.external) :
		type==="repoHome"   ? pick(MESSAGES.repoHome) :
		type==="repoChild"  ? pick(MESSAGES.repoChild) :
		type==="unknownRepo"? pick(MESSAGES.unknownRepo) :
		pick(MESSAGES.info);

	var wrap = document.createElement("div");
	wrap.id = "akshat-network-overlay";
	wrap.innerHTML = `
	<style>
	#akshat-network-overlay{
		position:fixed;
		inset:0;
		background:rgba(8,12,20,.92);
		z-index:2147483647;
		display:flex;
		align-items:center;
		justify-content:center;
		font-family:system-ui,Arial;
	}
	.ak-box{
		max-width:520px;
		padding:22px 26px;
		border-radius:12px;
		background:#0b74de;
		color:#fff;
		box-shadow:0 15px 40px rgba(0,0,0,.5);
		animation:akFade .4s ease;
	}
	.ak-title{
		font-size:18px;
		font-weight:600;
		margin-bottom:6px;
	}
	.ak-sub{
		font-size:13px;
		opacity:.9;
	}
	.ak-timer{
		margin-top:14px;
		font-size:12px;
		opacity:.8;
	}
	@keyframes akFade{
		from{transform:scale(.95);opacity:0}
		to{transform:scale(1);opacity:1}
	}
	</style>

	<div class="ak-box" role="dialog" aria-hidden="true">
		<div class="ak-title">${msg}</div>
		<div class="ak-sub">${subtitle||"Akshat Project Network"}</div>
		<div class="ak-timer">Continuing automatically…</div>
	</div>
	`;

	document.body.appendChild(wrap);

	setTimeout(function(){
		try{ wrap.remove(); }catch(e){}
	}, MAX_TIME);
}

/* -----------------------
   PATH ANALYSIS
----------------------- */
function analyze(url){
	try{
		if(!url.startsWith(PREFIX)){
			return {type:"external"};
		}

		var path = url.replace(PREFIX,"");
		var parts = path.split("/").filter(Boolean);

		if(parts.length===0){
			return {type:"repoHome", subtitle:"Network Root"};
		}

		var slug = "/"+parts[0];
		var db = (window.AkshatNetwork && AkshatNetwork.db && AkshatNetwork.db.all) || [];
		var found = db.find(function(p){ return p.slug===slug; });

		if(found){
			return parts.length===1
				? {type:"repoHome", subtitle:found.title}
				: {type:"repoChild", subtitle:found.title+" → "+parts.slice(1).join("/")};
		}

		return {type:"unknownRepo", subtitle:slug};
	}catch(e){
		return {type:"info"};
	}
}

/* -----------------------
   INITIAL LOAD MESSAGE
----------------------- */
document.addEventListener("DOMContentLoaded", function(){
	var info = analyze(location.href);
	showOverlay(info.type, info.subtitle);
});

/* -----------------------
   LINK CLICK MESSAGE
----------------------- */
document.addEventListener("click", function(e){
	try{
		var a = e.target.closest("a[href]");
		if(!a) return;

		var href = a.href;
		if(!href) return;

		var info = analyze(href);
		showOverlay(info.type, info.subtitle);
	}catch(e){}
}, true);

})();

// expose API safely
try{
	Object.defineProperty(global,"AkshatNetwork",{
		value: API,
		writable:false,
		configurable:false,
		enumerable:true
	});
}catch(e){ global.AkshatNetwork = API; }

// lightweight integrity seal
try{
	Object.defineProperty(global,"__AKSHAT_NET_SEAL",{value: (function(){ try{ return {ts:ENV.timestamp,ver:ENV.version}; }catch(e){return {}; } })(), writable:false,configurable:false});
}catch(e){}

// final safety: protect key prototypes from being overwritten silently
try{
	var protectList=[Document.prototype, Node.prototype, Element.prototype];
	protectList.forEach(function(p){
		try{ Object.seal(p); }catch(e){}
	});
}catch(e){}

// end
})(typeof window!=="undefined"?window:this);
})();